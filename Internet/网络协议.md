﻿﻿﻿#网络协议##TCP、UDP---###概述- tcp、udp协议都属于运输层协议- 运输层的主要作用是提供两台通信主机的进程间的通信协议，因此tcp、udp都用端口号来区分是主机中的那个进程在参与通信- 端口号分类： - 服务器端使用的端口号：     - 熟知端口号：0~1023。IANA把这些端口指派给TCP/IP中的一些重要的协议应用。这些端口可以在www.iana.org中查询到。常用的几个有：DNS-53、HTTP-80。     - 登记端口号：1024~49151。这类端口号需要在IANA按照标准登记。 - 客户端使用的端口号：49152~65535。这类端口号又叫短暂端口号，在用户进程运行时动态分配的。###UDP-用户数据报协议####特点1. **UDP是无连接的**：即发送数据之前不需要建立连接，因此减少了开销和发送时延2. **UDP是尽最大努力交付的**：即不保证可靠交付，因此数据传输不可靠3. **UDP是面向报文的**：UDP一次交付一整个报文，不会对报文进行分片；因此要控制字报文的长度，以免过长导致IP层分片、过短导致IP数据首部相对长度过长。4. **UDP没有拥塞控制**：网络的拥塞不会导致发送速率的降低，因此适合像电话、直播等要求数据及时并且允许少许丢包的场景5. **UDP支持一对一、一对多、多对一和多对多的交互场景**。6. **UDP的首部开销低**。只有8个字节####报文1. **源端口**：2字节，在对方需要回信时使用，不需要时全填02. **目的端口**：2字节，目的端口号3. **长度**：2字节，整个UDP数据包的长度（不包括伪首部），最小为8字节，只有首部4. **检验和**：2字节，与伪首部配合检验数据报是否出错，若出错就丢弃。5. **UDP数据部分**####生成检验和- 添加伪首部：源IP（4）+目的IP（4）+0（1）+17（1）+UDP长度（2）- 把检验和设为全0- 把整个UDP用户数据包分割成以16位数据为单位的分块，不足16位的填充0- 把每个分块按二进制反码运算求和- 得到的结果求反码得到检验和####检验数据报- 前四步与生成检验和流程一直- 当得到的结果全为1时，数据包无差错，否则有错直接丢弃###TCP-传输控制协议